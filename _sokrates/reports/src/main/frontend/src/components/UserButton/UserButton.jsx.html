<html>
<head>
    <title>frontend/src/components/UserButton/UserButton.jsx</title>
    <style type="text/css" media="screen">
        #editor {
            position: absolute;
            top: 40px;
            right: 0;
            bottom: 0;
            left: 0;
        }
    </style>
</head>
<body style="font-family: 'DejaVu Sans', Arial, Helvetica, sans-serif">
<h3 style="margin-bottom: 0">frontend/src/components/UserButton/UserButton.jsx (<b>82</b> lines of code) (<a href="UserButton.jsx">raw</a>):</h3>
<div id="editor">import { useContext, useState, useEffect, useRef } from &quot;react&quot;;
import { Link, useNavigate } from &quot;react-router-dom&quot;;
import { AuthContext } from &quot;../AuthContext/auth-context&quot;;
import &quot;./UserButton.css&quot;;

const UserButton = () =&gt; {
  const { isLoggedIn, user } = useContext(AuthContext);
  const [open, setOpen] = useState(false);
  const navigate = useNavigate();

  //
  const menuRef = useRef(null);

  useEffect(() =&gt; {
    const handleClickOutside = (e) =&gt; {
      //si le dropdown existe et que le clic n'est pas a l'interieur, on ferme le menu
      if (menuRef.current &amp;&amp; !menuRef.current.contains(e.target)) {
        setOpen(false);
      }
    };

    document.addEventListener(&quot;click&quot;, handleClickOutside);
    return () =&gt; {
      document.removeEventListener(&quot;click&quot;, handleClickOutside);
    };
  }, []);

  return isLoggedIn ? (
    &lt;div className=&quot;userButton&quot; ref={menuRef}&gt;
      &lt;img
        src={user.photo ? user.photo : &quot;/general/noAvatar.png&quot;}
        alt=&quot;avatar&quot;
        className=&quot;profilePic&quot;
        onClick={() =&gt; {
          navigate(`/user/${user.id}`);
          setOpen(false);
        }}
      /&gt;
      &lt;img
        src=&quot;/general/arrow.svg&quot;
        alt=&quot;toggle&quot;
        onClick={() =&gt; setOpen((prev) =&gt; !prev)}
      /&gt;
      {open &amp;&amp; (
        &lt;div className=&quot;userOptions&quot;&gt;
          &lt;div
            className=&quot;uo&quot;
            onClick={() =&gt; {
              navigate(`/user/${user.id}`);
              setOpen(false);
            }}
          &gt;
            Profile
          &lt;/div&gt;
          &lt;div
            className=&quot;uo&quot;
            onClick={() =&gt; {
              navigate(&quot;/modification&quot;);
              setOpen(false);
            }}
          &gt;
            Options
          &lt;/div&gt;
          &lt;div
            className=&quot;uo&quot;
            onClick={() =&gt; {
              navigate(&quot;/logout&quot;);
              setOpen(false);
            }}
          &gt;
            Logout
          &lt;/div&gt;
        &lt;/div&gt;
      )}
    &lt;/div&gt;
  ) : (
    &lt;&gt;
      &lt;Link to=&quot;/inscription&quot; className=&quot;loginLink&quot;&gt;
        Sign Up
      &lt;/Link&gt;

      &lt;Link to=&quot;/login&quot; className=&quot;loginLink&quot;&gt;
        Login
      &lt;/Link&gt;
    &lt;/&gt;
  );
};

export default UserButton;
</div>
<script src="https://www.zeljkoobrenovic.com/tools/common/lib/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("editor");
    editor.session.setMode("ace/mode/html");
    editor.setTheme("ace/theme/xcode");
    editor.setReadOnly(true);
    editor.setOption("wrap", true);
    editor.setPrintMarginColumn(120);
</script>
</body>
